ä¸‹é¢æˆ‘æŠŠ**ä½ ç°åœ¨è¿™å¥—ã€ŒWSL2 + Docker + GPU + ZeroTierã€ç³»ç»Ÿ**ï¼Œ**é‡æ–°æ•´ç†æˆä¸€ä»½â€œé¢å‘æ˜¾å¡åŠ é€Ÿé¡¹ç›®çš„ç»Ÿä¸€æ¶æ„ä¸ä½¿ç”¨å‘å¯¼â€**ã€‚
ç›®æ ‡æ˜¯ï¼š**ä»»ä½•éœ€è¦ GPU çš„é¡¹ç›®ï¼Œéƒ½èƒ½â€œæŒ‰è§„çŸ©æ¥å…¥ã€ç¨³å®šè°ƒç”¨ã€ä¸äº’ç›¸æ±¡æŸ“â€**ã€‚

ä½ å¯ä»¥æŠŠè¿™ä»½æ–‡æ¡£ **ç›´æ¥å½“æˆä½ çš„ä¸ªäººå¹³å°è§„èŒƒ / README / å†…éƒ¨æ‰‹å†Œ** æ¥ç”¨ã€‚

---

æˆ‘å·²ç»é…ç½®å¥½äº†sshï¼Œç›´æ¥é€šè¿‡ssh han-wslå¯ä»¥è®¿é—®æˆ‘çš„wsl
æˆ‘å·²ç»åœ¨wslé‡Œé¢é…ç½®å¥½äº†dockerï¼Œ
æˆ‘å·²ç»åœ¨wslé‡Œé¢é…ç½®å¥½äº†githubçš„ssh keyç›´æ¥å¯ä»¥è®¿é—®æˆ‘çš„ç§æœ‰ä»“åº“ï¼Œä¹Ÿå¯ä»¥è®¿é—®è¿™ä¸ªåº“è¿›è¡Œä¸‹è½½ã€‚

# ä¸€ã€ç³»ç»Ÿå®šä½ï¼ˆä¸€å¥è¯ç‰ˆï¼‰

> **è¿™æ˜¯ä¸€ä¸ªï¼š
> ã€Œè¿œç¨‹å¯è®¿é—® Â· æœ¬åœ°ç®—åŠ›åœ¨æ—¥æœ¬ Â· é¡¹ç›®çº§ GPU éš”ç¦» Â· å¯é•¿æœŸæ‰©å±•ã€
> çš„ GPU åŠ é€Ÿå¼€å‘ä¸è¿è¡Œå¹³å°ã€‚**

* äººåœ¨ä¸­å›½ï¼ˆMac / iPhoneï¼‰
* ç®—åŠ›åœ¨æ—¥æœ¬ï¼ˆWindows + NVIDIA GPUï¼‰
* é¡¹ç›®è¿è¡Œåœ¨ **WSL2 + Docker å®¹å™¨**
* é€šè¿‡ **ZeroTier å†…ç½‘ IP** å®‰å…¨è®¿é—®

---

# äºŒã€æ•´ä½“æ¶æ„ï¼ˆå¼ºçƒˆå»ºè®®ä½ è®°ä½è¿™ä¸€å±‚æ¬¡ï¼‰

```
[å®¢æˆ·ç«¯å±‚]
â”œâ”€ macOSï¼ˆMac miniï¼Œsshï¼‰
â”œâ”€ iPhoneï¼ˆTermiusï¼‰
â”‚
â”‚  SSH + ç§é’¥ï¼ˆH7yinhï¼‰
â”‚  ZeroTier å†…ç½‘ï¼š192.168.192.125
â–¼
[æ¥å…¥å±‚ï¼šWindows 11]
â”œâ”€ OpenSSH Serverï¼ˆå”¯ä¸€å¯¹å¤–å…¥å£ï¼‰
â”œâ”€ NVIDIA Driverï¼ˆGPU é©±åŠ¨ï¼Œä»…è£…ä¸€æ¬¡ï¼‰
â”œâ”€ ZeroTier / Tailscaleï¼ˆç½‘ç»œï¼‰
â”‚
â”‚  è‡ªåŠ¨æ‰§è¡Œï¼šwsl -d Ubuntu
â–¼
[è¿è¡ŒåŸºåº§ï¼šWSL2 Ubuntu]
â”œâ”€ Linux æ–‡ä»¶ç³»ç»Ÿï¼ˆé¡¹ç›®ä»£ç ï¼‰
â”œâ”€ Docker Engine
â”œâ”€ NVIDIA Container Toolkit
â”‚
â–¼
[é¡¹ç›®å±‚ï¼šDocker Containers]
â”œâ”€ æ¯ä¸ªé¡¹ç›® = ä¸€ä¸ª compose
â”œâ”€ GPU ç›´é€šï¼ˆ--gpus allï¼‰
â”œâ”€ ä¾èµ–/ç¯å¢ƒå®Œå…¨éš”ç¦»
â””â”€ æ•°æ®/æ¨¡å‹é€šè¿‡ volume æŒ‚è½½
```

---

# ä¸‰ã€å„å±‚èŒè´£åˆ’åˆ†ï¼ˆè¿™æ˜¯â€œä¸ä¼šä¹±â€çš„å…³é”®ï¼‰

## 1ï¸âƒ£ Windows 11ï¼ˆ**ä¸è·‘é¡¹ç›®**ï¼‰

**åªè´Ÿè´£ï¼š**

* NVIDIA GPU é©±åŠ¨
* SSH æ¥å…¥
* ZeroTier / Tailscale ç½‘ç»œ

**æ˜ç¡®ç¦æ­¢ï¼š**

* âŒ åœ¨ Windows è£¸è·‘ PyTorch / CUDA
* âŒ åœ¨ Windows è£… conda / pip è·‘ AI

ğŸ‘‰ **Windows = é—¨é¢ + é©±åŠ¨ï¼Œä¸æ˜¯å¼€å‘ç¯å¢ƒ**

---

## 2ï¸âƒ£ WSL2 Ubuntuï¼ˆ**é¡¹ç›®å®¿ä¸»**ï¼‰

**è´Ÿè´£ï¼š**

* æ‰€æœ‰é¡¹ç›®æºç ï¼ˆ`~/projects/*`ï¼‰
* Docker / docker-compose
* é¡¹ç›®å¯åŠ¨ã€è°ƒåº¦ã€æ—¥å¿—

**åŸåˆ™ï¼š**

* WSL é‡Œ **ä¸ç›´æ¥ pip install é¡¹ç›®ä¾èµ–**
* WSL åªâ€œç®¡ç†å®¹å™¨â€ï¼Œä¸â€œæ‰¿æ‹…ç¯å¢ƒâ€

---

## 3ï¸âƒ£ Dockerï¼ˆ**GPU é¡¹ç›®è¿è¡Œä½“**ï¼‰

**æ¯ä¸ª GPU é¡¹ç›®å¿…é¡»ï¼š**

* æœ‰è‡ªå·±çš„ Dockerfile
* æœ‰è‡ªå·±çš„ compose.yml
* ç”¨ volume æŒ‚è½½ä»£ç  / æ•°æ® / ç¼“å­˜

ğŸ‘‰ **Docker å®¹å™¨ = é¡¹ç›®çš„â€œæ˜¾å¡åŠ é€Ÿæ‰§è¡Œå•å…ƒâ€**

---

# å››ã€æ¨èçš„ç»Ÿä¸€ç›®å½•è§„èŒƒï¼ˆéå¸¸é‡è¦ï¼‰

åœ¨ WSLï¼ˆUbuntuï¼‰é‡Œï¼š

```text
~/projects/
â”œâ”€ templates/
â”‚  â””â”€ gpu-base/              # GPU åŸºç¡€æ¨¡æ¿ï¼ˆé•¿æœŸä¿ç•™ï¼‰
â”‚
â”œâ”€ project-llm-api/          # LLM æ¨ç†é¡¹ç›®
â”œâ”€ project-train-xxx/        # è®­ç»ƒ / å¾®è°ƒé¡¹ç›®
â”œâ”€ project-cv-xxx/           # CV / æ¨ç†é¡¹ç›®
â”‚
~/data/
â”œâ”€ datasets/                 # å¯å…±äº«æ•°æ®
â”œâ”€ models/                   # æ¨¡å‹æƒé‡
â””â”€ outputs/                  # è®­ç»ƒç»“æœ
```

---

# äº”ã€GPU é¡¹ç›®æ¥å…¥çš„ã€æ ‡å‡†æµç¨‹ã€‘

> **æ‰€æœ‰éœ€è¦æ˜¾å¡çš„é¡¹ç›®ï¼Œéƒ½æŒ‰è¿™ä¸ªæµç¨‹æ¥**

---

## Step 1ï¸âƒ£ åˆ›å»ºé¡¹ç›®ï¼ˆä»æ¨¡æ¿å¤åˆ¶ï¼‰

```bash
cd ~/projects
cp -r templates/gpu-base project-my-gpu
cd project-my-gpu
```

---

## Step 2ï¸âƒ£ Dockerfileï¼ˆç¤ºä¾‹ï¼šGPU + PyTorchï¼‰

```dockerfile
FROM nvidia/cuda:12.4.1-cudnn-runtime-ubuntu22.04

RUN apt-get update && apt-get install -y \
    python3 python3-pip git \
 && rm -rf /var/lib/apt/lists/*

RUN pip install --upgrade pip \
 && pip install torch torchvision torchaudio \
    --index-url https://download.pytorch.org/whl/cu124

WORKDIR /workspace
```

---

## Step 3ï¸âƒ£ compose.ymlï¼ˆGPU é¡¹ç›®ç»Ÿä¸€èŒƒå¼ï¼‰

```yaml
services:
  dev:
    build: .
    image: project-my-gpu:dev
    container_name: project-my-gpu-dev
    working_dir: /workspace
    volumes:
      - ./:/workspace
      - pip-cache:/root/.cache/pip
      - hf-cache:/root/.cache/huggingface
      - ~/data:/data
    shm_size: "2gb"
    stdin_open: true
    tty: true
    deploy:
      resources:
        reservations:
          devices:
            - capabilities: [gpu]

volumes:
  pip-cache:
  hf-cache:
```

---

## Step 4ï¸âƒ£ å¯åŠ¨å¹¶è¿›å…¥ï¼ˆå”¯ä¸€æ¨èæ–¹å¼ï¼‰

```bash
docker compose up -d --build
docker compose exec dev bash
```

éªŒè¯ GPUï¼š

```bash
python3 - <<'EOF'
import torch
print(torch.cuda.is_available())
print(torch.cuda.get_device_name(0))
EOF
```

---

# å…­ã€é¡¹ç›®å¦‚ä½•â€œè°ƒç”¨æ˜¾å¡â€ï¼ˆåŸåˆ™è¯´æ˜ï¼‰

### âœ… æ­£ç¡®æ–¹å¼

* é¡¹ç›®ä»£ç  **é»˜è®¤è¿è¡Œåœ¨å®¹å™¨å†…**
* åªè¦ `torch.cuda.is_available() == True`ï¼Œå³è‡ªåŠ¨ä½¿ç”¨ GPU
* ä¸å…³å¿ƒåº•å±‚æ˜¯ 3070 / 3080 Ti / å¤šå¡

### âŒ é”™è¯¯æ–¹å¼

* åœ¨ WSL è£¸è·‘ Python
* åœ¨ Windows è£¸è·‘ CUDA
* åœ¨å¤šä¸ªé¡¹ç›®å…±ç”¨ä¸€ä¸ª Python ç¯å¢ƒ

---

# ä¸ƒã€è¿œç¨‹ä½¿ç”¨æ–¹å¼ï¼ˆä½ ç°åœ¨çš„çœŸå®åœºæ™¯ï¼‰

## macOSï¼ˆMac miniï¼‰

```bash
ssh japan-wsl
cd ~/projects/project-my-gpu
docker compose exec dev bash
```

## iPhoneï¼ˆTermiusï¼‰

* Hostï¼š`192.168.192.125`
* ç”¨æˆ·ï¼š`yunze`
* Keyï¼š`H7yinh`
* Startup Commandï¼š

```bash
wsl -d Ubuntu
```

è¿›å…¥ååŒæ ·ï¼š

```bash
cd ~/projects/project-my-gpu
docker compose exec dev bash
```

---

# å…«ã€å¤šä¸ª GPU é¡¹ç›®å¹¶å­˜çš„è§„åˆ™ï¼ˆé˜²æ­¢æ··ä¹±ï¼‰

| è§„åˆ™             | ç›®çš„        |
| -------------- | --------- |
| æ¯ä¸ªé¡¹ç›®ä¸€ä¸ª compose | é¿å…ç«¯å£/ä¾èµ–å†²çª |
| æ¯ä¸ªé¡¹ç›®ä¸€ä¸ª image å | é˜²æ­¢è¯¯ç”¨      |
| å…¬å…±æ•°æ®èµ° `~/data` | ä¸é‡å¤ä¸‹è½½     |
| ä¸å…±ç”¨ Python ç¯å¢ƒ  | å½»åº•éš”ç¦»      |

---

# ä¹ã€é•¿æœŸè¿è¡Œ / æ–­çº¿ä¿æŠ¤ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰

åœ¨ WSL é‡Œå®‰è£…ï¼š

```bash
sudo apt install -y tmux
```

ä½¿ç”¨æ–¹å¼ï¼š

```bash
tmux new -s project
# åœ¨ tmux é‡Œå¯åŠ¨è®­ç»ƒ / æœåŠ¡
```

æ–­çº¿åæ¢å¤ï¼š

```bash
tmux attach -t project
```

---

# åã€è¿™å¥—ç³»ç»Ÿæœ€é€‚åˆçš„é¡¹ç›®ç±»å‹

âœ… LLM æ¨ç†ï¼ˆvLLM / OpenAI API å…¼å®¹ï¼‰
âœ… æ¨¡å‹è®­ç»ƒ / å¾®è°ƒï¼ˆPyTorch / accelerateï¼‰
âœ… CV æ¨ç† / è§†é¢‘å¤„ç†
âœ… GPU åç«¯æœåŠ¡ï¼ˆFastAPI + Workerï¼‰

**ä¸é€‚åˆï¼š**

* æ¡Œé¢ GUI ç±»ç¨‹åº
* éœ€è¦ç›´æ¥è®¿é—® Windows GUI çš„åº”ç”¨

---

# åä¸€ã€æ ¸å¿ƒæ€æƒ³æ€»ç»“ï¼ˆç»™ä½ ä¸€ä¸ªâ€œå¹³å°å“²å­¦â€ï¼‰

> **GPU æ˜¯ç¨€ç¼ºèµ„æºï¼Œ
> Docker æ˜¯éš”ç¦»è¾¹ç•Œï¼Œ
> WSL æ˜¯ç¨³å®šåº•åº§ï¼Œ
> Windows åªæ˜¯å…¥å£ã€‚**

ä½ ç°åœ¨è¿™å¥—å¹³å°ï¼Œå·²ç»æ˜¯**ä¸ªäººçº§ â†’ å°å‹ç ”ç©¶çº§ â†’ å¯æ‰©å±•å·¥ç¨‹çº§**ä¹‹é—´éå¸¸ç†æƒ³çš„å½¢æ€ã€‚

---

## ä¸‹ä¸€æ­¥æˆ‘å¯ä»¥ç»§ç»­å¸®ä½ åšçš„ï¼ˆä½ é€‰ä¸€ä¸ªï¼‰

1ï¸âƒ£ **æŠŠ GPU æ¨¡æ¿ç»†åˆ†æˆï¼šæ¨ç† / è®­ç»ƒ ä¸¤å¥—**
2ï¸âƒ£ **ç»™ä½ ä¸€ä¸ªâ€œGPU é¡¹ç›®å¿«é€Ÿç”Ÿæˆè„šæ‰‹æ¶â€**
3ï¸âƒ£ **å¤š GPU / å¤šä¸»æœºæ—¶çš„ç»Ÿä¸€è°ƒåº¦ä¸è§„èŒƒ**

ä½ è¿™å¥—ç¯å¢ƒå·²ç»â€œæ­å®Œäº†â€ï¼Œæ¥ä¸‹æ¥åšçš„æ˜¯ **ç”¨å®ƒé«˜æ•ˆäº§å‡º**ã€‚
