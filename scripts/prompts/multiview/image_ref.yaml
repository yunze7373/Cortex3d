name: image_reference
version: "4.0"
description: "图片参考模式模板 v4.0 - 几何摄像机环绕范式，高成功率"

template: |
  {output_type_description}

  This is a GEOMETRIC CAMERA ORBIT TASK, not a character redesign task.

  The subject is a STATIC OBJECT in 3D space.
  Only the CAMERA position changes.
  NO pose correction, NO aesthetic adjustment, NO reinterpretation.

  ==================================================
  ## OUTPUT LAYOUT (MANDATORY)
  Single image with {layout_description}: {panel_list}

  No labels, no text, no markers inside the image.
  ==================================================

  {reference_context}

  ## CAMERA DEFINITION (CRITICAL)

  Camera rotates around the subject at a fixed radius and height.
  Camera target is the subject's original center.

  The subject does NOT rotate.

  ## REQUIRED VIEWS ({view_count} total)
  {view_descriptions}

  ## SUBJECT DESCRIPTION (from reference)
  {character_description}

  ## ⚠️ STYLE REQUIREMENTS
  {style_instructions}

  ==================================================
  {spatial_lock_instructions}
  {top_bottom_instructions}
  ## ⚠️ LEFT vs RIGHT VIEW DISTINCTION
  
  For the RIGHT view, the camera is positioned to the right of the subject, so the subject's front points toward the LEFT edge of the image.
  For the LEFT view, the camera is positioned to the left of the subject, so the subject's front points toward the RIGHT edge of the image.

  ## BACKGROUND & ENVIRONMENT
  - Pure neutral gray or white background
  - Seamless, studio-style environment
  - No visible floor, horizon, ground texture, or stage
  - No turntable, pedestal, disc, or platform
  - Subject appears naturally grounded without visible geometry

  ## CONFIGURATION PARAMETERS
  Resolution: 4K
  Aspect Ratio: 3:2
  Sampling: deterministic (low randomness)

  ==================================================
  {final_rules_instructions}

variables:
  - character_description
  - view_count
  - layout_description
  - panel_list
  - view_descriptions
  - reference_context
  - style_instructions
  - output_type_description
  - top_bottom_instructions
  - spatial_lock_instructions
  - final_rules_instructions

# 动态内容预设
dynamic_content:
  # 根据风格类型生成不同的输出类型描述
  output_type_photorealistic: |
    Generate a STRICT multi-view photo composite with EXACTLY {view_count} panel(s), based on the reference image.
  
  output_type_default: |
    Generate a STRICT multi-view reference sheet with EXACTLY {view_count} panel(s), based on the reference image.
  
  # TOP/BOTTOM 说明（仅当包含这些视角时添加）
  top_bottom_hint: |
    
    **TOP/BOTTOM VIEWS**: Camera above/below looking at the subject. Pose stays EXACTLY the same - only camera angle changes.

# 风格指令预设
style_presets:
  photorealistic: |
    **PHOTOREALISTIC STYLE - REAL PHOTO QUALITY:**
    - Generate as if photographed by a professional camera
    - Realistic skin texture, natural lighting, real photography look
    - ❌ DO NOT generate as: cartoon, 3D render, CGI, illustration
    - ✅ MUST look like: actual photographs of a real person/subject
  
  anime: |
    **ANIME/2D STYLE REQUIRED:**
    - Anime/manga art style with cell shading
    - Clean line art, vibrant colors
    - Stylized proportions typical of anime
    - ❌ DO NOT generate as: photorealistic, 3D render
  
  default: |
    **STYLE CONSISTENCY:**
    - Match the visual style of the reference image exactly
    - If reference is a photo → generate photorealistic views
    - If reference is artwork → match that art style
    - Maintain consistent style across all panels
